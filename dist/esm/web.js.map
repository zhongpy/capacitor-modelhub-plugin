{"version":3,"file":"web.js","sourceRoot":"","sources":["../../src/web.ts"],"names":[],"mappings":"AAUA,MAAM,OAAO,0BAA0B;IAAvC;QACU,cAAS,GAAsC,EAAE,CAAC;IAwD5D,CAAC;IAtDC,KAAK,CAAC,IAAI,CAAC,OAA0B;QACnC,OAAO,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,OAAO;QACX,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IAC7B,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,OAA6B;QACzC,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QAC7D,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QAC/D,OAAO,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI,GAAG,EAAE,EAAE,CAAC;IACpC,CAAC;IAED,KAAK,CAAC,KAAK,CAAC,OAA+B;QACzC,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAChE,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QAE7D,OAAO;YACL,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;gBAC1B,GAAG,EAAE,EAAE,CAAC,GAAG;gBACX,MAAM,EAAE,SAAS;gBACjB,aAAa,EAAE,GAAG,IAAI,IAAI,MAAM,CAAC,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACzE,aAAa,EAAE,KAAK;aACrB,CAAC,CAAC;SACJ,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,QAAmD;QACvE,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;IACrE,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,QAAsD;QAC9E,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;IACrE,CAAC;IAED,KAAK,CAAC,WAAW,CACf,SAA8B,EAC9B,YAA4C;QAE5C,IAAI,SAAS,KAAK,mBAAmB;YAAE,OAAO,EAAE,MAAM,EAAE,KAAK,IAAI,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;QAC7E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAClC,OAAO;YACL,MAAM,EAAE,KAAK,IAAI,EAAE;gBACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,YAAY,CAAC,CAAC;YACtE,CAAC;SACF,CAAC;IACJ,CAAC;IAES,IAAI,CAAC,EAAiB;QAC9B,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YAChC,IAAI,CAAC;gBAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YAAC,CAAC;YAAC,QAAQ,YAAY,IAAd,CAAC,CAAC,YAAY,CAAC,CAAC;QACxC,CAAC;IACH,CAAC;CACF","sourcesContent":["// src/web.ts\nimport type {\n  CapacitorModelhubPluginPlugin,\n  ModelItem,\n  EnsurePolicy,\n  CheckResult,\n  EnsureResult,\n  ProgressEvent,\n} from \"./definitions\";\n\nexport class CapacitorModelhubPluginWeb implements CapacitorModelhubPluginPlugin {\n  private listeners: Array<(e: ProgressEvent) => void> = [];\n\n  async echo(options: { value: string }) {\n    return { value: options.value };\n  }\n\n  async getRoot() {\n    return { path: \"/models\" };\n  }\n\n  async getPath(options: { unpackTo: string }) {\n    const root = (await this.getRoot()).path.replace(/\\/+$/, \"\");\n    const rel = String(options.unpackTo || \"\").replace(/^\\/+/, \"\");\n    return { path: `${root}/${rel}` };\n  }\n\n  async check(options: { items: ModelItem[] }): Promise<{ results: CheckResult[] }> {\n    const items = Array.isArray(options.items) ? options.items : [];\n    const root = (await this.getRoot()).path.replace(/\\/+$/, \"\");\n\n    return {\n      results: items.map((it) => ({\n        key: it.key,\n        status: \"missing\",\n        installedPath: `${root}/${String(it.unpackTo || \"\").replace(/^\\/+/, \"\")}`,\n        hasBundledZip: false,\n      })),\n    };\n  }\n\n  async ensureInstalled(_options: { item: ModelItem; policy: EnsurePolicy }): Promise<EnsureResult> {\n    throw new Error(\"CapacitorModelhubPlugin is not supported on Web\");\n  }\n\n  async ensureInstalledMany(_options: { items: ModelItem[]; policy: EnsurePolicy }): Promise<{ results: EnsureResult[] }> {\n    throw new Error(\"CapacitorModelhubPlugin is not supported on Web\");\n  }\n\n  async addListener(\n    eventName: \"ModelsHubProgress\",\n    listenerFunc: (event: ProgressEvent) => void\n  ): Promise<{ remove: () => Promise<void> }> {\n    if (eventName !== \"ModelsHubProgress\") return { remove: async () => void 0 };\n    this.listeners.push(listenerFunc);\n    return {\n      remove: async () => {\n        this.listeners = this.listeners.filter((fn) => fn !== listenerFunc);\n      },\n    };\n  }\n\n  protected emit(ev: ProgressEvent) {\n    for (const fn of this.listeners) {\n      try { fn(ev); } catch { /* ignore */ }\n    }\n  }\n}\n"]}